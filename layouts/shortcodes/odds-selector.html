{{ .Page.Scratch.Add "requiredCSS" (slice "odds.css") }}
{{ .Page.Scratch.Add "requiredJS" (slice "odds.js") }}

<div class="container odds-selector">
    
    <!-- 1. Configuration Card -->
    <div class="odds-card">
        <div class="card-header">
            <h2 class="card-title">Game Configuration</h2>
        </div>

        <div class="settings-group">
            <div class="checkbox-item main-toggle">
                <input type="checkbox" id="frc-toggle">
                <label for="frc-toggle">Enable Fischer Random (Chess960)</label>
            </div>
            
            <div id="frc-input-container" class="hidden indent-container">
                <div class="input-group frc-input-group">
                    <label for="frc-id">FRC ID (0-959):</label>
                    <div class="frc-input-controls">
                        <input type="number" id="frc-id" min="0" max="959" value="0">
                        <label for="frc-random" class="frc-random-toggle">
                            <input type="checkbox" id="frc-random" checked>
                            <span>Generate random</span>
                        </label>
                    </div>
                </div>
                <small class="helper-text">Piece positions are determined from the Bot's perspective.</small>
            </div>
        </div>

        <div class="radio-group">
            <div class="radio-card selected">
                <input type="radio" id="color_black" name="color" value="black" checked>
                <label for="color_black">
                    <span class="radio-title">Play as Black</span>
                    <span class="radio-subtitle">Bot is White (First move)</span>
                </label>
            </div>
            <div class="radio-card">
                <input type="radio" id="color_white" name="color" value="white">
                <label for="color_white">
                    <span class="radio-title">Play as White</span>
                    <span class="radio-subtitle">Bot is Black</span>
                </label>
            </div>
        </div>
    </div>

    <!-- 2. Handicap Card -->
    <div class="odds-card">
        <div class="card-header">
            <h2 class="card-title">Remove Bot's Pieces</h2>
            <span class="card-subtitle">Select pieces to remove from the bot</span>
        </div>

        <!-- Queen (Full Width) -->
        <div class="piece-section standalone">
            <div class="checkbox-item large-checkbox">
                <input type="checkbox" id="queen">
                <label for="queen">Queen</label>
            </div>
        </div>

        <!-- Minor Pieces Grid -->
        <div class="pieces-grid">
            <!-- Knights -->
            <div class="piece-column">
                <h3 class="column-label">Knights</h3>
                <div class="checkbox-stack">
                    <div class="checkbox-item">
                        <input type="checkbox" id="knight_q">
                        <label for="knight_q">Queen-side Knight</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="knight_k">
                        <label for="knight_k">King-side Knight</label>
                    </div>
                </div>
            </div>

            <!-- Bishops -->
            <div class="piece-column">
                <h3 class="column-label">Bishops</h3>
                <div class="checkbox-stack">
                    <div class="checkbox-item">
                        <input type="checkbox" id="bishop_q">
                        <label for="bishop_q">Queen-side Bishop</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="bishop_k">
                        <label for="bishop_k">King-side Bishop</label>
                    </div>
                </div>
            </div>

            <!-- Rooks -->
            <div class="piece-column">
                <h3 class="column-label">Rooks</h3>
                <div class="checkbox-stack">
                    <div class="checkbox-item">
                        <input type="checkbox" id="rook_q">
                        <label for="rook_q">Queen-side Rook</label>
                    </div> 
                    <div class="checkbox-item">
                        <input type="checkbox" id="rook_k">
                        <label for="rook_k">King-side Rook</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. Action Buttons & Feedback -->
    <div class="actions-container">
        <div class="buttons-row" style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
             <!-- Copy Button (Small, Left) -->
            <button id="copyBtn" class="btn btn-secondary odds-btn" title="Copy Link" style="flex: 0 0 auto;">
                <i class="material-symbols--content-copy"></i>
            </button>

            <!-- Challenge Button (Main) -->
            <button id="generateBtn" class="btn-generate odds-btn" style="flex: 1;">
                 ⚔️ Challenge
            </button>
        </div>

        <small id="configHint" class="config-hint hidden" aria-live="polite" style="display: block; margin-top: 0.25rem;">
            Complete the configuration to generate a challenge.
        </small>
    </div>
</div>
